import{c as j,r as d,j as e,F as y,A as p}from"./index-WQXFQPYK.js";import{E as h}from"./external-link-BNnUiMyH.js";import{R as g,B as w,X as E,Y as P,T as V,a as S,C as F}from"./BarChart-DL7tZb7a.js";const k=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],L=j("calendar",k),$=({mode:o="all",severityFilter:l})=>{const[n,i]=d.useState([]),[b,r]=d.useState(!0);d.useEffect(()=>{const s=()=>{fetch(`${p}/api/news`).then(t=>t.json()).then(t=>{i(t),r(!1)}).catch(t=>{console.error("Error fetching news:",t),r(!1)})};s();const a=setInterval(s,5e3);return()=>clearInterval(a)},[]);const u=s=>{switch(s){case"Critical":return"text-red-500 border-red-500/30 bg-red-500/10";case"High":return"text-orange-500 border-orange-500/30 bg-orange-500/10";case"Medium":return"text-yellow-500 border-yellow-500/30 bg-yellow-500/10";case"Low":return"text-blue-500 border-blue-500/30 bg-blue-500/10";default:return"text-slate-400 border-slate-700 bg-slate-800"}},N=s=>{const a=new Date(s),t=new Date,m=new Date;return m.setDate(m.getDate()-1),a.toDateString()===t.toDateString()?"Today":a.toDateString()===m.toDateString()?"Yesterday":a.toLocaleDateString([],{month:"short",day:"numeric",year:"numeric"})};let f=n;l&&(f=n.filter(s=>s.severity===l));const c=!!l,x=(c?f:n.filter(s=>s.severity==="Critical"||s.severity==="High")).slice(0,50),C=(c?[]:n.filter(s=>s.severity!=="Critical"&&s.severity!=="High")).slice(0,100).reduce((s,a)=>{const t=N(a.pubDate);return s[t]||(s[t]=[]),s[t].push(a),s},{}),D=c||o==="all"||o==="critical",v=!c&&(o==="all"||o==="timeline");return e.jsxDEV("div",{className:"h-full flex flex-col gap-3",children:[D&&x.length>0&&e.jsxDEV("div",{className:`bg-slate-900/50 border border-slate-800 rounded-xl p-3 custom-scrollbar ${o==="critical"||c?"h-full flex flex-col":"flex-none max-h-[160px] overflow-y-auto"}`,children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-2 sticky top-0 bg-slate-900/90 backdrop-blur z-10 py-1 flex-none",children:[l?e.jsxDEV("div",{className:`w-3 h-3 rounded-full ${u(l).split(" ")[0].replace("text-","bg-")}`},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:110,columnNumber:29},void 0):e.jsxDEV(y,{className:"w-5 h-5 text-red-500 animate-pulse"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:112,columnNumber:29},void 0),e.jsxDEV("h3",{className:`text-lg font-bold ${l?"text-slate-200":"text-red-400"}`,children:l?`${l} Threats`:"Critical Threats"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:114,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:108,columnNumber:21},void 0),e.jsxDEV("div",{className:`grid gap-3 ${o==="critical"||c?"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 overflow-y-auto pr-2 custom-scrollbar p-2":"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"}`,children:x.map((s,a)=>e.jsxDEV("a",{href:s.link,target:"_blank",rel:"noopener noreferrer",className:`block bg-slate-800/40 border border-slate-700/50 rounded hover:border-cyan-500/50 transition-colors group h-fit ${o==="critical"?"p-6":"p-3"}`,children:[e.jsxDEV("div",{className:"flex justify-between items-center mb-2",children:[e.jsxDEV("span",{className:`uppercase font-bold rounded border ${u(s.severity)} ${o==="critical"?"text-sm px-3 py-1":"text-[10px] px-1.5 py-0.5"}`,children:s.severity},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:123,columnNumber:37},void 0),e.jsxDEV(h,{className:`text-slate-400 opacity-0 group-hover:opacity-100 transition-opacity ${o==="critical"?"w-5 h-5":"w-3 h-3"}`},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:126,columnNumber:37},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:122,columnNumber:33},void 0),e.jsxDEV("h4",{className:`font-bold text-slate-200 group-hover:text-cyan-400 ${o==="critical"?"text-xl mb-2":"text-sm mb-1 truncate"}`,children:s.title},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:128,columnNumber:33},void 0),s.contentSnippet&&e.jsxDEV("p",{className:`text-slate-400 mt-1 leading-relaxed opacity-80 ${o==="critical"?"text-base line-clamp-4":"text-xs line-clamp-2"}`,children:s.contentSnippet},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:130,columnNumber:37},void 0),e.jsxDEV("div",{className:`flex items-center gap-2 mt-2 ${o==="critical"?"text-sm":"text-[10px]"}`,children:[e.jsxDEV("span",{className:"text-slate-500 font-medium",children:s.source},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:133,columnNumber:37},void 0),e.jsxDEV("span",{className:"text-slate-600",children:"•"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:134,columnNumber:37},void 0),e.jsxDEV("span",{className:"text-slate-500",children:N(s.pubDate)},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:135,columnNumber:37},void 0),s.category&&s.category!=="General Info"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV("span",{className:"text-slate-600",children:"•"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:138,columnNumber:45},void 0),e.jsxDEV("span",{className:"text-cyan-400/80 bg-cyan-950/30 px-1.5 py-0.5 rounded border border-cyan-900/50",children:s.category},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:139,columnNumber:45},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:137,columnNumber:41},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:132,columnNumber:33},void 0)]},a,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:120,columnNumber:29},void 0))},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:118,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:107,columnNumber:17},void 0),v&&e.jsxDEV("div",{className:"bg-slate-900 border border-slate-800 rounded-xl p-6 flex-1 min-h-0 flex flex-col",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6 flex-none",children:[e.jsxDEV("h3",{className:"text-xl font-bold text-slate-100 flex items-center gap-3",children:[e.jsxDEV(L,{className:"w-6 h-6 text-cyan-500"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:154,columnNumber:29},void 0),"Latest Security Feed"]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:153,columnNumber:25},void 0),e.jsxDEV("span",{className:"text-sm text-slate-500 font-medium bg-slate-800 px-3 py-1 rounded-full",children:"Live Updates"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:157,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:152,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex-1 overflow-y-auto pr-4 custom-scrollbar",children:b?e.jsxDEV("div",{className:"text-slate-500 text-center py-20 text-lg animate-pulse",children:"Loading Intelligence Feed..."},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:162,columnNumber:29},void 0):Object.entries(C).map(([s,a])=>e.jsxDEV("div",{className:"mb-8 last:mb-0",children:[e.jsxDEV("div",{className:"sticky top-0 bg-slate-900/95 backdrop-blur py-3 z-10 border-b border-slate-800 mb-4",children:e.jsxDEV("span",{className:"text-sm font-bold text-cyan-400 uppercase tracking-widest pl-2 border-l-4 border-cyan-500",children:s},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:167,columnNumber:41},void 0)},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:166,columnNumber:37},void 0),e.jsxDEV("div",{className:"space-y-4",children:a.map((t,m)=>e.jsxDEV("a",{href:t.link,target:"_blank",rel:"noopener noreferrer",className:"block group bg-slate-800/20 p-4 rounded-xl border border-transparent hover:border-slate-700 transition-all hover:bg-slate-800/40",children:e.jsxDEV("div",{className:"flex items-start gap-4",children:[e.jsxDEV("div",{className:"flex-1 min-w-0",children:[e.jsxDEV("h4",{className:"text-lg font-bold text-slate-200 group-hover:text-cyan-400 transition-colors leading-snug",children:t.title},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:174,columnNumber:57},void 0),e.jsxDEV("div",{className:"flex items-center gap-3 mt-3 text-xs text-slate-500 font-mono",children:[e.jsxDEV("span",{className:"text-slate-400 font-bold bg-slate-800 px-2 py-0.5 rounded",children:t.source},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:178,columnNumber:61},void 0),e.jsxDEV("span",{children:new Date(t.pubDate).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:179,columnNumber:61},void 0),t.severity&&t.severity!=="Low"&&e.jsxDEV("span",{className:`px-2 py-0.5 rounded border font-bold ${u(t.severity)}`,children:t.severity},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:181,columnNumber:65},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:177,columnNumber:57},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:173,columnNumber:53},void 0),e.jsxDEV(h,{className:"w-5 h-5 text-slate-600 group-hover:text-cyan-500 transition-colors opacity-0 group-hover:opacity-100 flex-none mt-1"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:185,columnNumber:53},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:172,columnNumber:49},void 0)},m,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:171,columnNumber:45},void 0))},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:169,columnNumber:37},void 0)]},s,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:165,columnNumber:33},void 0))},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:160,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:151,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/NewsFeed.tsx",lineNumber:103,columnNumber:9},void 0)},I={Critical:"#ef4444",High:"#f97316",Medium:"#eab308",Low:"#3b82f6"},_=()=>{const[o,l]=d.useState([]),[n,i]=d.useState(null);d.useEffect(()=>{fetch(`${p}/api/news/stats`).then(r=>r.json()).then(r=>l(r)).catch(r=>console.error("Error fetching stats:",r))},[]);const b=r=>{n===r.name?i(null):i(r.name)};return e.jsxDEV("div",{className:"h-full flex flex-col gap-4",children:[e.jsxDEV("div",{className:`bg-slate-900 border border-slate-800 rounded-xl p-4 flex flex-col ${n?"h-1/2":"h-full transition-all duration-300"}`,children:[e.jsxDEV("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-3",children:[e.jsxDEV("h3",{className:"text-sm font-semibold text-slate-100",children:"Monthly Threat Severity"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:41,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex bg-slate-800/50 p-1 rounded-lg",children:["Critical","High","Medium","Low"].map(r=>e.jsxDEV("button",{onClick:()=>i(n===r?null:r),className:`px-3 py-1 text-xs font-medium rounded-md transition-all ${n===r?"bg-cyan-500 text-white shadow-lg shadow-cyan-500/20":"text-slate-400 hover:text-slate-200 hover:bg-slate-700/50"}`,children:r},r,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:46,columnNumber:29},void 0))},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:44,columnNumber:21},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:40,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-1 min-h-0",children:e.jsxDEV(g,{width:"100%",height:"100%",children:e.jsxDEV(w,{data:o,onClick:r=>{r&&r.activePayload&&b(r.activePayload[0].payload)},children:[e.jsxDEV(E,{dataKey:"name",stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:66,columnNumber:29},void 0),e.jsxDEV(P,{stroke:"#94a3b8",fontSize:12,tickLine:!1,axisLine:!1,allowDecimals:!1},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:67,columnNumber:29},void 0),e.jsxDEV(V,{contentStyle:{backgroundColor:"#1e293b",borderColor:"#334155",color:"#f1f5f9"},cursor:{fill:"#334155",opacity:.4}},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:68,columnNumber:29},void 0),e.jsxDEV(S,{dataKey:"count",radius:[4,4,0,0],barSize:60,children:o.map((r,u)=>e.jsxDEV(F,{fill:I[r.name]||"#94a3b8",className:"cursor-pointer hover:opacity-80 transition-opacity",opacity:n&&n!==r.name?.3:1},`cell-${u}`,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:74,columnNumber:37},void 0))},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:72,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:61,columnNumber:25},void 0)},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:60,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:59,columnNumber:17},void 0),!n&&e.jsxDEV("p",{className:"text-xs text-slate-500 text-center mt-2",children:"Click a bar to filter news"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:85,columnNumber:39},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:39,columnNumber:13},void 0),n&&e.jsxDEV("div",{className:"flex-1 min-h-0 animate-in slide-in-from-bottom duration-300 fade-in",children:e.jsxDEV("div",{className:"h-full bg-slate-900 border border-slate-800 rounded-xl overflow-hidden flex flex-col",children:[e.jsxDEV("div",{className:"p-3 border-b border-slate-800 bg-slate-900/50 flex justify-between items-center",children:[e.jsxDEV("h4",{className:"text-sm font-bold text-slate-200",children:[n," Items"]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:92,columnNumber:29},void 0),e.jsxDEV("button",{onClick:()=>i(null),className:"text-xs text-slate-400 hover:text-white",children:"Close"},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:95,columnNumber:29},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:91,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex-1 min-h-0 p-2",children:e.jsxDEV($,{mode:"timeline",severityFilter:n},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:101,columnNumber:29},void 0)},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:99,columnNumber:25},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:90,columnNumber:21},void 0)},void 0,!1,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:89,columnNumber:17},void 0)]},void 0,!0,{fileName:"D:/Project/CC/soc ui/src/components/dashboard/SeverityChart.tsx",lineNumber:38,columnNumber:9},void 0)},B=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{$ as N,_ as S,B as a};
